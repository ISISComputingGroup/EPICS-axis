#Addition of alias here to provide aliasing of the motor to the axis.
#Note that in any st.cmd that loads this it will have to be a logical name in $(AXIS)
alias("$(P)$(mAXIS)","$(P)$(AXIS):MTR")

record (ao, "$(P)$(AXIS):SP")
{
	field(DESC, "$(AXIS) Axis Setpoint")
	field(OUT, "$(P)$(mAXIS).VAL PP MS")
	field(PREC, "3")
    info(archive, "VAL")
    info(INTEREST, "HIGH")
}

record (ai, "$(P)$(AXIS)") 
{
	field(DESC, "Current $(AXIS) Axis position")
	field(PREC, "3")
    field(INP, "$(P)$(mAXIS).RBV CP")
    info(archive, "VAL")
    info(INTEREST, "HIGH")
}

record (ai, "$(P)$(AXIS):SP:RBV") 
{
	field(DESC, "Current $(AXIS) Axis position")
	field(PREC, "3")
    field(INP, "$(P)$(mAXIS).VAL CP")
    info(archive, "VAL")
    info(INTEREST, "HIGH")
}

#record(ao, "$(P)$(AXIS):BPUT") 
#{
#  field(SDIS, "$(P)$(AXIS):SP.PACT  NPP NMS")
#  field(OUT, "$(P)$(AXIS):SP.VAL  PP MS")
#}

record (transform, "$(P)$(AXIS):INIT")
{
	field(DESC, "Axis Value Init")
    field(COPT, "Always")
    field(PINI, "YES")
	field(INPA, "$(P)$(mAXIS).VAL NPP NMS")
	field(CLCA, "A")
	field(OUTA, "$(P)$(AXIS):SP NPP NMS")
	field(PREC, "3")
	field(CMTA, "Axis initial setpoint")
}

#  do not PINI or autosave - underlying motor record will do this
record(bo, "$(P)$(AXIS):ABLE:SP") {
  field(DESC, "Axis enable")
  field(OUT, "$(P)$(mAXIS)_able PP MS")
  field(ZNAM, "Enable")
  field(ONAM, "Disable")
}

record(bi, "$(P)$(AXIS):ABLE") {
  field(DESC, "Axis enable status")
  field(INP, "$(P)$(mAXIS)_able CP MS")
  field(ZNAM, "Enable")
  field(ONAM, "Disable")
}
alias("$(P)$(AXIS):ABLE", "$(P)$(AXIS):ABLE:SP:RBV")

record(stringin, "$(P)$(AXIS):MOTOR") {
  field(DESC, "Axis motor name")
  field(VAL, "$(mAXIS)")
}

record(bo, "$(P)$(AXIS):LOCK:SP") {
  field(DESC, "Axis lock")
  field(OUT, "$(P)$(mAXIS)_lock PP MS")
  field(ZNAM, "Unlocked")
  field(ONAM, "Locked")
}

record(bi, "$(P)$(AXIS):LOCK") {
  field(DESC, "Axis lock status")
  field(INP, "$(P)$(mAXIS)_lock CP MS")
  field(ZNAM, "Unlocked")
  field(ONAM, "Locked")
}
alias("$(P)$(AXIS):LOCK", "$(P)$(AXIS):LOCK:SP:RBV")

## update axis archive and monitor deadbands from motor deadbands
record (seq, "$(P)$(AXIS):AMDEL") {
	field(PINI, "1")
	field(DOL1, "$(P)$(mAXIS).ADEL NPP NMS")
	field(LNK1, "$(P)$(AXIS).ADEL NPP NMS")
	field(DOL2, "$(P)$(mAXIS).MDEL NPP NMS")
	field(LNK2, "$(P)$(AXIS).MDEL NPP NMS")
}
